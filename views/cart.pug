<!DOCTYPE html>
<html lang="en">
<head>
    include layout/header.pug
    <link rel="stylesheet" href="styles/cart.css">
    <title>Корзина</title>
</head>
<body>
    include layout/menu.pug
    <main>
        <h1 class="cart-title">Корзина</h1>
        if(productList)
            <div class="main-container">
                <div class="cart-items">
                    each product in productList
                        <div class="product">
                            <div class="product-image-wrap">
                                <a href="/product?productId=#{product.product_id}"><img src="#{product.product_url_img}"/></a>
                            </div>
                            <div class="product-property">
                                <div class="product-info">
                                    <div class="product-caption">
                                        <div class="product-name">
                                            <a href="/product?productId=#{product.product_id}" class="product-name-link">#{product.product_name}</a>
                                        </div>
                                        <div class="menu-product">
                                            <div class="menu-product-wrapper">
                                                <button class="menu-control-button" data-product_id=#{product.product_id}>Удалить</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="count-buttons">
                                        <button class="button-action button-minus" data-product_id=#{product.product_id}><i>-</i></button>
                                        <input type="number" class="count-value" value="#{product.count}" min="1" max="99" data-product_id="#{product.product_id}" >
                                        <button class="button-action button-plus" data-product_id=#{product.product_id}><i>+</i></button>
                                    </div>
                                </div>
                                <div class="product-price">
                                    <div class="price-block">
                                        <span class="price-current">#{product.product_amount}</span> 
                                        //- Переделать на object
                                        <img src="images/ruble.svg" alt="ruble" class="ruble-icon" width="20px" height="20px">
                                    </div>
                                    <div class="product-remains-wrap">
                                        <span class="product-remains">В наличии: #{product.product_count_stock} шт.</span> 
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                <div class="total-amount">
                    <div class="total-amount-label">
                        <div class="total-amount-count">Итого: #{total_count} товар(a) на </div>
                        <div class="price">
                            <span>#{total_amount}</span>
                            <img src="images/ruble.svg" alt="ruble" class="ruble-icon" width="20px" height="20px">
                        </div>
                    </div>
                    <div class="total-amount-button">
                        <button class="buy-button" onclick="document.location.href='/orderRegistration'">
                            | Перейти к оформлению заказа
                        </button>
                    </div>
                </div>
            </div>
        else 
            <div class="empty_cart_wrap">
                <svg class="empty_cart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 469.333 469.333" xml:space="preserve">
                    <g>
                        <path d="M434.979,42.667H85.333v3.061l-4.375-14.999C75.687,12.635,58.844,0,40,0H10.667C4.771,0,0,4.771,0,10.667     s4.771,10.667,10.667,10.667H40c9.427,0,17.844,6.313,20.479,15.365l66.396,227.635l-34.021,42.521     c-4.854,6.073-7.521,13.688-7.521,21.458c0,18.948,15.406,34.354,34.354,34.354H416c5.896,0,10.667-4.771,10.667-10.667     c0-5.896-4.771-10.667-10.667-10.667H119.687c-7.177,0-13.021-5.844-13.021-13.021c0-2.948,1.01-5.844,2.854-8.135l34.279-42.844     h209.221c16.448,0,31.604-9.615,38.615-24.5l74.438-158.177c2.135-4.552,3.26-9.604,3.26-14.615v-3.021     C469.333,58.073,453.927,42.667,434.979,42.667z M448,80.042c0,1.906-0.427,3.823-1.24,5.542L372.333,243.75     c-3.51,7.438-11.083,12.25-19.313,12.25H146.667L90.663,64h344.316C442.156,64,448,69.844,448,77.021V80.042z"/>
                        <path d="M128,384c-23.531,0-42.667,19.135-42.667,42.667s19.135,42.667,42.667,42.667s42.667-19.135,42.667-42.667     S151.531,384,128,384z M128,448c-11.76,0-21.333-9.573-21.333-21.333c0-11.76,9.573-21.333,21.333-21.333     c11.76,0,21.333,9.573,21.333,21.333C149.333,438.427,139.76,448,128,448z"/>
                        <path d="M384,384c-23.531,0-42.667,19.135-42.667,42.667s19.135,42.667,42.667,42.667s42.667-19.135,42.667-42.667     S407.531,384,384,384z M384,448c-11.76,0-21.333-9.573-21.333-21.333c0-11.76,9.573-21.333,21.333-21.333     c11.76,0,21.333,9.573,21.333,21.333C405.333,438.427,395.76,448,384,448z"/>
                    </g>
                </svg>
            </div>
    </main>
    if(successAuthentication)
        <script src="javascript/cart.js" defer></script>
    include layout/footer.pug
</body>
</html>
