<!DOCTYPE html>
<html lang="en">
<head>
    include layout/header.pug
    <link rel="stylesheet" href="styles/cart.css">
    <title>Корзина</title>
</head>
<body>
    include layout/menu.pug
    <main>
        <h1 class="cart-title">Корзина</h1>
        if(productList)
            <div class="main-container">
                <div class="cart-items">
                    each product in productList
                        <div class="product">
                            <div class="product-image-wrap">
                                <a href="/product?productId=#{product.product_id}"><img src="#{product.product_url_img}"/></a>
                            </div>
                            <div class="product-property">
                                <div class="product-info">
                                    <div class="product-caption">
                                        <div class="product-name">
                                            <a href="/product?productId=#{product.product_id}" class="product-name-link">#{product.product_name}</a>
                                        </div>
                                        <div class="menu-product">
                                            <div class="menu-product-wrapper">
                                                <button class="menu-control-button" data-product_id=#{product.product_id}>Удалить</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="count-buttons">
                                        <button class="button-action button-minus" data-product_id=#{product.product_id}><i>-</i></button>
                                        <input type="number" class="count-value" value="#{product.count}" min="1" max="99" data-product_id="#{product.product_id}" >
                                        <button class="button-action button-plus" data-product_id=#{product.product_id}><i>+</i></button>
                                    </div>
                                </div>
                                <div class="product-price">
                                    <div class="price-block">
                                        <span class="price-current">#{product.product_amount}</span> 
                                        //- Переделать на object
                                        <img src="images/ruble.svg" alt="ruble" class="ruble-icon" width="20px" height="20px">
                                    </div>
                                    <div class="product-remains-wrap">
                                        <span class="product-remains">В наличии: #{product.product_count_stock} шт.</span> 
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                <div class="total-amount">
                    <div class="total-amount-label">
                        <div class="total-amount-count">Итого: #{total_count} товар(a) на </div>
                        <div class="price">
                            | #{total_amount}
                            <img src="images/ruble.svg" alt="ruble" class="ruble-icon" width="20px" height="20px">
                        </div>
                    </div>
                    <div class="total-amount-button">
                        <button class="buy-button" onclick="document.location.href='/orderRegistration'">
                            | Перейти к оформлению заказа
                        </button>
                    </div>
                </div>
            </div>
        else 
            <div>Ваша корзина пуста</div>
    </main>
    if(successAuthentication)
        <script src="javascript/cart.js" defer></script>
    include layout/footer.pug
</body>
</html>
